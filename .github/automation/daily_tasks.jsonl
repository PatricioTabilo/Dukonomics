{"id": "DK-018", "priority": "medium", "type": "fix", "file": "UI/components/FilterBar.lua", "commit": "fix(filters): correct cached characters sync field typo", "instruction": "Fix cached filter sync bug where code writes to filters.character instead of filters.characters during initialization.", "acceptance": ["Initialization sync uses filters.characters consistently", "Cached character selections restore correctly"], "verify": ["manual_ui_filter_review"]}
{"id": "DK-019", "priority": "low", "type": "perf", "file": "UI/MainFrame.lua", "commit": "perf(mainframe): remove repeated datastore lookups in filter loops", "instruction": "Avoid calling Dukonomics.Data.GetDataStore() multiple times inside GetFilteredData; reuse the already-fetched datastore reference.", "acceptance": ["Only one datastore fetch is used per refresh", "No behavior changes in filtering output"], "verify": ["manual_code_review"]}
{"id": "DK-020", "priority": "low", "type": "fix", "file": "UI/components/FilterBar.lua", "commit": "fix(filters): close dropdowns on escape key", "instruction": "Support closing any open filter dropdown with ESC key even before the main frame closes.", "acceptance": ["ESC closes open dropdown menu first", "Main frame close behavior remains intact"], "verify": ["manual_ui_filter_review"]}
{"id": "DK-021", "priority": "low", "type": "docs", "file": "README.md", "commit": "docs(readme): add filter UX notes and known limits", "instruction": "Document filter behavior (multi-select characters, cached filters, dropdown closing expectations) in README for contributors/testers.", "acceptance": ["README contains filter UX section", "Notes reflect current implemented behavior"], "verify": ["manual_readme_review"]}
{"id": "DK-022", "priority": "high", "type": "fix", "file": "handlers/MailHandler.lua", "commit": "fix(mail): match expired caged pets using species id fallback", "instruction": "When processing expired auction mails for caged battle pets, support matching postings even if posting name is generic (e.g. 'Pet Cage'/'Caja de mascota') and mail subject uses species name. Implement robust fallback matching by battle pet species ID from links while preserving current name-first behavior.", "acceptance": ["Expired caged pet mail marks the correct active posting as expired even when names differ", "Non-pet expiration matching continues to work unchanged", "No false positives when multiple active postings exist"], "verify": ["manual_mail_expired_pet_scenario", "manual_regression_expired_non_pet"]}
